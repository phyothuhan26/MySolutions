@startuml
title G&G Revamp

skinparam shadowing false
skinparam linetype ortho
skinparam defaultTextAlignment center

' ---------- ZONE STYLE ----------
skinparam package {
  BorderStyle dashed
  BorderThickness 1
}

skinparam rectangle {
  RoundCorner 18
  BorderThickness 1
}

' ---------- ACTORS / DEVICES ----------
actor Staff
rectangle "YPS POS Device" as POS

' ---------- EXTERNAL SERVICES ----------
package "External Services" {
  rectangle "YPS Service"
  rectangle "MPT"
  rectangle "ATOM"
}

' ---------- FRONTEND ----------
package "G&G FrontEnd" {
  rectangle "YPS Eservice"
  rectangle "Eservice"
}

' ---------- AWS HOSTED ----------
package "AWS Cloud" {

  package "G&G Middleware" {
    rectangle "G&G Backend"
    queue "RabbitMQ"
  }

  rectangle "Sale Service"

}
' ---------- DB  ----------
package "Database " {
 database "Integration DB"
 database "YPS Integration DB"
  database "Sale DB"
}


' ---------- ERP ----------
rectangle "Microsoft AX"

' ---------- FLOWS ----------
Staff --> "G&G FrontEnd":HTTPS
Staff --> POS
"G&G FrontEnd" --> "G&G Middleware" : HTTPS
"G&G Backend" --> "Integration DB": JDBC(connection)
"G&G Backend" --> "YPS Integration DB": YPS data store seperate
"G&G Backend" --> RabbitMQ : AMQP (publish)
RabbitMQ --> "Sale Service" : AMQP (consume)

"Sale Service" --> "Sale DB" : JDBC
"Sale Service" --> "Microsoft AX" : Integration

POS --> "YPS Service"
"YPS Service" --> "G&G Middleware" : Callback

@enduml
